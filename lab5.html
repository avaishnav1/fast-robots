<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>ECE4160: Fast Robots</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Sidebar -->
			<section id="sidebar">
			
				<img src="images/picture.png" class="wrapper center">
				<h3 class="wrapper center" style="color:#deecff">Akshati
					Vaishnav </h1>
					<div class="inner">
						
						<nav>
							<ul>
								<li><a href="index.html">Home</a></li>
								<li><a href="lab1.html">Lab 1</a></li>
								<li><a href="lab2.html">Lab 2</a></li>
								<li><a href="lab3.html">Lab 3</a></li>
								<li><a href="lab4.html">Lab 4</a></li>
								<li><a href="lab5.html">Lab 5</a></li>
								<li><a href="lab6.html">Lab 6</a></li>
								<li><a href="lab7.html">Lab 7</a></li>
								<li><a href="lab8.html">Lab 8</a></li>
								<li><a href="lab9.html">Lab 9</a></li>
								<li><a href="lab10.html">Lab 10</a></li>
								<li><a href="lab11.html">Lab 11</a></li>
								<li><a href="lab12.html">Lab 12</a></li>
							</ul>
						</nav>
					</div>
				</section>

		<!-- Wrapper -->
			<div id="wrapper">
					<section id="main" class="wrapper style2">
						<div class="inner">
							<h1 class="major">Lab 5</h1>
							<h2 class="major">Prelab</h2>
							<p>In order to allow for easier programming of the Artemis Nano while debugging the PID control, I performed a few steps. First, I split my ble_arduino.ino file into multiple header files for improved readability. I first added a ble.h header file, which consisted of the handle_command() function, which was the largest function in this program, along with a few other helper functions. I also added defines.h, which contains all of the global variables, and cmd_types.h, which contains the CommandTypes enum.</p>
							<figure>
								<img src="images/lab5_helper_functions.png" height="350">
								<figcaption>Figure 1. Additional helper functions in ble.h</figcaption>
							</figure>
							<p>Furthermore, I added more commands to allow me to change the PID parameters, Kp, Ki, and Kd. Figure 2 shows the command for changing Kp.</p>
							<figure>
								<img src="images/lab5_kp_change.png" height="250">
								<figcaption>Figure 2. CHANGE_KP command to allow changes in parameters without having to flash the program repeatedly.</figcaption>
							</figure>
							<p>Next, I implemented a notification handler on my laptop, which would allow my data to be stored properly into arrays. which could then be plotted.</p>
							<figure>
								<img src="images/lab5_notif_handler.png" height="250">
								<figcaption>Figure 3. PID notification handler.</figcaption>
							</figure>
							<p>I also added a hard stop after 10 seconds and another in the case that the bluetooth was ever disconnected.</p>
							<p>At a high level, to send data over bluetooth, I first connect my Artemis over Bluetooth. Then, from my laptop, I start the notification handler and send my PID Control command (described in further sections). On the Arduino side, my ble.h file is used from the ble_arduino.ino file as it contains the handle_commands() function which describes what the PID control command does. This specific command not only determines the necessary PWM signal to send to the motor drivers, but also stores time-stamped data of the ToF sensor and PWM signal, which is sent back to my laptop over bluetooth after the data is done being collected.</p>
							<h2>P Control</h2>
							<h3>General Code</h3>
							<figure>
								<img src="images/lab5_pid_control.png" height="900">
								<figcaption>Figure 4. Code for implmenting P control. Note: the if statement which checks for the ToF data being ready should also consist of the these two lines: <code>distanceSensor.clearInterrupt();
									distanceSensor.stopRanging();</code></figcaption>
							</figure>
							<p>Figure 4 above shows my code for implementing a P controller, which was the first step I took in this lab after setting up my files. This code starts by initializing most variables to zero and recording the start time. Next, I set up a while loop which executes for 10 seconds, as I anticipated that my robot will be able to reach a steady location within this time. Inside the while loop, I first collect the data from the ToF sensor if it is available. Then, I calculate the error which is used in the p-term (k_p * error) of my controller, which currently is the only term that determines the PWM signal. I ensure that the PWM signal doesn't enter the deadband region, in which the PWM signal is too slow to make the wheels move; I also use the helper functions to use the PWM values to move the motor. Then, I store PWM, ToF, and time values in three separate arrays, ensuring that I don't go out of the arrays' bounds. After the 10 seconds, all of the collected data is transmitted. </p>
							<p>From the previous labs, I kept my range to be the lowest possible, as I found that even the lowest range could support around 3m worth of distance relatively accurately. Furthermore, due to this lower range, I was able to increase the sampling frequency of my ToF sensor.</p>
							<h3>Parameter Tuning</h3>
							<p>This lab took especially for me, as my initial while loop set up was incorrect. When I started working on this system, my while loop stated that it would stop executing when the ToF sensor recorded a distance of 304mm. Although this achieved the purpose of stopping at the 1ft mark, this was incorrect as we wanted to see how the robot is able to adjust itself to be exactly 1ft away from a wall. Also, it was possible that the ToF sensor never records an exact measurement of 304mm due to the speed of the robot. Therefore, by stopping when we record a distance of 304mm, I was unable to see the robot's control and the robot could run infinitely.</p>
							<p>After identifying this main issue, along with fixing my placement of helper functions and global variables, I was able to focus on tuning my parameters.</p>
							<p>I started with setting my Kp to be at 1, as I though that would be a reasonably low value. However, when I did so, the robot's PWM value shot up to be the maximum possible number, and the robot crashed into the wall. Note that I initially set my robot's maximum PWM to be 100, as I didn't want the robot to go too fast. My deadband was set to be from -40 to 40 (PWM values).</p>
							<p>Below is a demo of my P control working as intended.</p>
							<video controls>
								<source src="videos/lab5_video1.mov" type="video/mp4">
							</video> 
							<figure>
								<img src="images/lab5_kp_0.03_working_distance.png" height="300">
								<img src="images/lab5_kp_0.03_working_pwm.png" height="300">
								<figcaption>Figure 5</figcaption>
							</figure>
							<p>To ensure that my robot was stablizing at the right distance I used a ruler to measure the distance, as shown below.</p>
							<figure>
								<img src="images/lab5_distance_measurement.jpg" height="300">
								<figcaption>Figure 5</figcaption>
							</figure>

							<p>I also had a considerable amount of difficulty with my ToF sensor, specifically the one on the front. At times, the readings from it did not make much sense, however, my control logic started working as soon as the ToF resulted in good values. I soldered my weaker wires on the ToF sensor again and even heat shrinked thicker wires onto the QUIIC connects and the ToF sensor, but I still feel that my ToF sensor doesn't work properly at times. Figure 6 and the video below shows a case where my ToF sensor wasn't collecting data well initially, but then started working again.</p>
							<video controls>
								<source src="videos/lab5_video2.mov" type="video/mp4">
							</video> 
							<figure>
								<img src="images/lab5_weird_tof_distance_graph.png" height="300">
								<img src="images/lab5_weird_tof_pwm_graph.png" height="300">
								<figcaption>Figure 6. ToF Sensor initial unnatural/incorrect values.</figcaption>
							</figure>
<!-- ToF:  [2.562, 2.562, 2.562, 2.562, 2.233, 2.233, 2.233, 2.233, 2.233, 2.233, 2.233, 2.233, 2.233, 2.233, 2.233, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.207, 2.207, 2.207, 2.207, 2.207, 2.207, 2.207, 2.207, 2.207, 2.207, 2.207, 2.159, 2.159, 2.159, 2.159, 2.159, 2.159, 2.159, 2.159, 2.159, 2.159, 2.159, 2.159, 2.159, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.21, 2.21, 2.21, 2.21, 2.21, 2.21, 2.21, 2.21, 2.21, 2.21, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2.226, 2.226, 2.226, 2.226, 2.226, 2.226, 2.226, 2.226, 2.226, 2.226, 2.226, 2.211, 2.211, 2.211, 2.211, 2.211, 2.211, 2.211, 2.211, 2.211, 2.231, 2.231, 2.231, 2.231, 2.231, 2.231, 2.231, 2.231, 2.231, 2.231, 2.231, 2.212, 2.212, 2.212, 2.212, 2.212, 2.212, 2.212, 2.212, 2.212, 2.212, 2.17, 2.17, 2.17, 2.17, 2.17, 2.17, 2.17, 2.17, 2.17, 2.17, 2.148, 2.148, 2.148, 2.148, 2.148, 2.148, 2.148, 2.148, 2.148, 2.148, 2.148, 2.13, 2.13, 2.13, 2.13, 2.13, 2.13, 2.13, 2.13, 2.13, 2.13, 2.081, 2.081, 2.081, 2.081, 2.081, 2.081, 2.081, 2.081, 2.081, 2.081, 2.081, 2.018, 2.018, 2.018, 2.018, 2.018, 2.018, 2.018, 2.018, 2.018, 2.018, 2.018, 2.018, 1.947, 1.947, 1.947, 1.947, 1.947, 1.947, 1.947, 1.947, 1.947, 1.947, 1.947, 1.897, 1.897, 1.897, 1.897, 1.897, 1.897, 1.897, 1.897, 1.897, 1.897, 1.819, 1.819, 1.819, 1.819, 1.819, 1.819, 1.819, 1.819, 1.819, 1.819, 1.725, 1.725, 1.725, 1.725, 1.725, 1.725, 1.725, 1.725, 1.725, 1.725, 1.632, 1.632, 1.632, 1.632, 1.632, 1.632, 1.632, 1.632, 1.632, 1.632, 1.632, 1.632, 1.536, 1.536, 1.536, 1.536, 1.536, 1.536, 1.536, 1.536, 1.536, 1.536, 1.425, 1.425, 1.425, 1.425, 1.425, 1.425, 1.425, 1.425, 1.425, 1.425, 1.425, 1.314, 1.314, 1.314, 1.314, 1.314, 1.314, 1.314, 1.314, 1.314, 1.314, 1.314, 1.314, 1.175, 1.175, 1.175, 1.175, 1.175, 1.175, 1.175, 1.175, 1.175, 1.175, 1.175, 1.054, 1.054, 1.054, 1.054, 1.054, 1.054, 1.054, 1.054, 1.054, 1.054, 1.054, 0.919, 0.919, 0.919, 0.919, 0.919, 0.919, 0.919, 0.919, 0.919, 0.919, 0.919, 0.782, 0.782, 0.782, 0.782, 0.782, 0.782, 0.782, 0.782, 0.782, 0.782, 0.782, 0.651, 0.651, 0.651, 0.651, 0.651, 0.651, 0.651, 0.651, 0.651, 0.651, 0.651, 0.519, 0.519, 0.519, 0.519, 0.519, 0.519, 0.519, 0.519, 0.519, 0.519, 0.519, 0.389, 0.389, 0.389, 0.389, 0.389, 0.389, 0.389, 0.389, 0.389, 0.389, 0.389, 0.389, 0.265, 0.265, 0.265, 0.265, 0.265, 0.265, 0.265, 0.265, 0.265, 0.145, 0.145, 0.145, 0.145, 0.145, 0.145, 0.145, 0.145, 0.145, 0.059, 0.059, 0.059, 0.059, 0.059, 0.059, 0.059, 0.059, 0.059, 0.059, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.042, 0.042, 0.042, 0.042, 0.042, 0.042, 0.042, 0.042, 0.042, 0.042, 0.042, 0.072, 0.072, 0.072, 0.072, 0.072, 0.072, 0.072, 0.072, 0.072, 0.072, 0.094, 0.094, 0.094, 0.094, 0.094, 0.094, 0.094, 0.094, 0.094, 0.094, 0.094, 0.122, 0.122, 0.122, 0.122, 0.122, 0.122, 0.122, 0.122, 0.122, 0.122, 0.122, 0.154, 0.154, 0.154, 0.154, 0.154, 0.154, 0.154, 0.154, 0.154, 0.154, 0.186, 0.186, 0.186, 0.186, 0.186, 0.186, 0.186, 0.186, 0.186, 0.186, 0.222, 0.222, 0.222, 0.222, 0.222, 0.222, 0.222, 0.222, 0.222, 0.222, 0.222, 0.262, 0.262, 0.262, 0.262, 0.262, 0.262, 0.262, 0.262, 0.262, 0.262, 0.262, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.369, 0.366, 0.366, 0.366, 0.366, 0.366, 0.366, 0.366, 0.366, 0.366, 0.366, 0.364, 0.364, 0.364, 0.364, 0.364, 0.364, 0.364, 0.364, 0.364, 0.364, 0.364, 0.363, 0.363, 0.363, 0.363, 0.363, 0.363, 0.363, 0.363, 0.363, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.359, 0.355, 0.355, 0.355, 0.355, 0.355, 0.355, 0.355, 0.355, 0.355, 0.355, 0.355, 0.352, 0.352, 0.352, 0.352, 0.352, 0.352, 0.352, 0.352, 0.352, 0.352, 0.349, 0.349, 0.349, 0.349, 0.349, 0.349, 0.349, 0.349, 0.349, 0.349, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.347, 0.346, 0.346, 0.346, 0.346, 0.346, 0.346, 0.346, 0.346, 0.346, 0.346, 0.342, 0.342, 0.342, 0.342, 0.342, 0.342, 0.342, 0.342, 0.342, 0.342, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.336, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.328, 0.328, 0.328, 0.328, 0.328, 0.328, 0.328, 0.328, 0.328, 0.328, 0.328, 0.328, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.304, 0.304, 0.304, 0.304, 0.304, 0.304, 0.304, 0.304, 0.304, 0.304, 0.304, 0.293, 0.293, 0.293, 0.293, 0.293, 0.293, 0.293, 0.293, 0.293, 0.283, 0.283, 0.283, 0.283, 0.283, 0.283, 0.283, 0.283, 0.283, 0.283, 0.283, 0.283, 0.283, 0.29, 0.29, 0.29, 0.29, 0.29, 0.29, 0.29, 0.29, 0.29, 0.29, 0.29, 0.29, 0.29, 0.302, 0.302, 0.302, 0.302, 0.302, 0.302, 0.302, 0.302, 0.302, 0.302, 0.315, 0.315, 0.315, 0.315, 0.315, 0.315, 0.315, 0.315, 0.315, 0.315, 0.315, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.334, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.332, 0.327, 0.327, 0.327, 0.327, 0.327, 0.327, 0.327, 0.327, 0.327, 0.327, 0.327, 0.327, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.317, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.303, 0.303, 0.303, 0.303, 0.303, 0.303, 0.303, 0.303, 0.303, 0.303, 0.303, 0.291, 0.291, 0.291, 0.291, 0.291, 0.291, 0.291, 0.291, 0.291, 0.291, 0.291, 0.298, 0.298, 0.298, 0.298, 0.298, 0.298, 0.298, 0.298, 0.298, 0.298, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.321, 0.321, 0.321, 0.321, 0.321, 0.321, 0.321, 0.321, 0.321, 0.321, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.318, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.286, 0.286, 0.286, 0.286, 0.286, 0.286, 0.286, 0.286, 0.286, 0.286, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.295, 0.306, 0.306, 0.306, 0.306, 0.306, 0.306, 0.306, 0.306, 0.306, 0.306, 0.306, 0.306, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.323, 0.316, 0.316, 0.316, 0.316, 0.316, 0.316, 0.316, 0.316, 0.316, 0.316, 0.316, 0.316, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.31, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.297, 0.297, 0.297, 0.297, 0.297, 0.297, 0.297, 0.297, 0.297, 0.297, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.311, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.309, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.307, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.305, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301, 0.301]
Time: [34406.0, 34407.0, 34418.0, 34425.0, 34430.0, 34435.0, 34440.0, 34451.0, 34462.0, 34473.0, 34484.0, 34498.0, 34509.0, 34516.0, 34526.0, 34537.0, 34547.0, 34557.0, 34565.0, 34575.0, 34583.0, 34593.0, 34605.0, 34611.0, 34621.0, 34630.0, 34650.0, 34659.0, 34665.0, 34670.0, 34676.0, 34685.0, 34696.0, 34703.0, 34714.0, 34720.0, 34731.0, 34740.0, 34751.0, 34762.0, 34768.0, 34774.0, 34783.0, 34785.0, 34796.0, 34801.0, 34807.0, 34815.0, 34823.0, 34827.0, 34837.0, 34848.0, 34862.0, 34869.0, 34879.0, 34890.0, 34899.0, 34910.0, 34920.0, 34932.0, 34942.0, 34949.0, 34960.0, 34966.0, 34974.0, 34984.0, 34992.0, 35003.0, 35014.0, 35022.0, 35032.0, 35038.0, 35048.0, 35058.0, 35069.0, 35080.0, 35091.0, 35102.0, 35107.0, 35116.0, 35126.0, 35133.0, 35143.0, 35153.0, 35154.0, 35165.0, 35176.0, 35187.0, 35199.0, 35207.0, 35210.0, 35222.0, 35232.0, 35248.0, 35256.0, 35267.0, 35276.0, 35287.0, 35298.0, 35306.0, 35318.0, 35322.0, 35330.0, 35340.0, 35348.0, 35358.0, 35370.0, 35376.0, 35386.0, 35394.0, 35404.0, 35416.0, 35424.0, 35435.0, 35445.0, 35456.0, 35467.0, 35478.0, 35494.0, 35500.0, 35511.0, 35523.0, 35533.0, 35541.0, 35552.0, 35563.0, 35570.0, 35581.0, 35588.0, 35599.0, 35610.0, 35622.0, 35626.0, 35636.0, 35637.0, 35648.0, 35655.0, 35666.0, 35673.0, 35684.0, 35695.0, 35703.0, 35715.0, 35725.0, 35736.0, 35747.0, 35758.0, 35769.0, 35780.0, 35790.0, 35796.0, 35807.0, 35813.0, 35818.0, 35824.0, 35831.0, 35835.0, 35846.0, 35861.0, 35869.0, 35879.0, 35887.0, 35897.0, 35909.0, 35915.0, 35925.0, 35935.0, 35941.0, 35946.0, 35952.0, 35960.0, 35968.0, 35979.0, 35988.0, 35999.0, 36008.0, 36018.0, 36027.0, 36038.0, 36046.0, 36057.0, 36064.0, 36075.0, 36086.0, 36091.0, 36098.0, 36109.0, 36116.0, 36126.0, 36138.0, 36149.0, 36164.0, 36171.0, 36182.0, 36189.0, 36197.0, 36209.0, 36218.0, 36227.0, 36238.0, 36248.0, 36256.0, 36267.0, 36278.0, 36284.0, 36294.0, 36306.0, 36312.0, 36322.0, 36332.0, 36343.0, 36353.0, 36364.0, 36372.0, 36383.0, 36390.0, 36402.0, 36412.0, 36417.0, 36424.0, 36434.0, 36442.0, 36452.0, 36464.0, 36475.0, 36480.0, 36487.0, 36498.0, 36508.0, 36518.0, 36528.0, 36536.0, 36547.0, 36556.0, 36567.0, 36577.0, 36585.0, 36596.0, 36606.0, 36616.0, 36626.0, 36636.0, 36647.0, 36661.0, 36667.0, 36672.0, 36686.0, 36694.0, 36705.0, 36717.0, 36722.0, 36732.0, 36743.0, 36750.0, 36760.0, 36770.0, 36778.0, 36781.0, 36792.0, 36798.0, 36807.0, 36819.0, 36829.0, 36835.0, 36846.0, 36852.0, 36862.0, 36872.0, 36878.0, 36883.0, 36897.0, 36908.0, 36919.0, 36928.0, 36938.0, 36949.0, 36960.0, 36971.0, 36976.0, 36982.0, 36989.0, 36997.0, 37000.0, 37012.0, 37022.0, 37027.0, 37035.0, 37043.0, 37054.0, 37064.0, 37073.0, 37084.0, 37094.0, 37104.0, 37115.0, 37124.0, 37135.0, 37142.0, 37153.0, 37159.0, 37169.0, 37177.0, 37187.0, 37198.0, 37205.0, 37216.0, 37227.0, 37233.0, 37243.0, 37254.0, 37264.0, 37275.0, 37286.0, 37291.0, 37297.0, 37304.0, 37309.0, 37319.0, 37334.0, 37342.0, 37352.0, 37362.0, 37373.0, 37383.0, 37389.0, 37396.0, 37405.0, 37412.0, 37417.0, 37424.0, 37433.0, 37439.0, 37445.0, 37456.0, 37470.0, 37480.0, 37489.0, 37497.0, 37500.0, 37512.0, 37522.0, 37538.0, 37546.0, 37556.0, 37564.0, 37574.0, 37584.0, 37595.0, 37606.0, 37616.0, 37627.0, 37638.0, 37649.0, 37660.0, 37676.0, 37682.0, 37693.0, 37705.0, 37715.0, 37726.0, 37733.0, 37744.0, 37755.0, 37766.0, 37777.0, 37782.0, 37791.0, 37803.0, 37808.0, 37818.0, 37826.0, 37836.0, 37846.0, 37857.0, 37867.0, 37875.0, 37885.0, 37893.0, 37905.0, 37915.0, 37922.0, 37933.0, 37942.0, 37953.0, 37958.0, 37965.0, 37969.0, 37980.0, 37996.0, 38004.0, 38013.0, 38023.0, 38034.0, 38044.0, 38050.0, 38059.0, 38070.0, 38080.0, 38090.0, 38107.0, 38117.0, 38123.0, 38131.0, 38141.0, 38148.0, 38158.0, 38169.0, 38176.0, 38186.0, 38194.0, 38205.0, 38214.0, 38222.0, 38225.0, 38236.0, 38241.0, 38251.0, 38262.0, 38268.0, 38278.0, 38288.0, 38299.0, 38307.0, 38317.0, 38327.0, 38338.0, 38348.0, 38359.0, 38370.0, 38381.0, 38386.0, 38397.0, 38405.0, 38416.0, 38426.0, 38437.0, 38444.0, 38455.0, 38465.0, 38473.0, 38483.0, 38494.0, 38504.0, 38510.0, 38515.0, 38525.0, 38533.0, 38544.0, 38555.0, 38566.0, 38582.0, 38589.0, 38599.0, 38609.0, 38620.0, 38630.0, 38638.0, 38648.0, 38649.0, 38660.0, 38667.0, 38678.0, 38684.0, 38695.0, 38705.0, 38709.0, 38714.0, 38723.0, 38734.0, 38740.0, 38750.0, 38758.0, 38768.0, 38779.0, 38789.0, 38799.0, 38809.0, 38820.0, 38835.0, 38840.0, 38851.0, 38857.0, 38864.0, 38868.0, 38875.0, 38887.0, 38897.0, 38902.0, 38913.0, 38922.0, 38928.0, 38933.0, 38939.0, 38950.0, 38960.0, 38968.0, 38979.0, 38988.0, 38998.0, 39004.0, 39014.0, 39024.0, 39030.0, 39035.0, 39041.0, 39052.0, 39062.0, 39068.0, 39074.0, 39085.0, 39092.0, 39102.0, 39114.0, 39125.0, 39136.0, 39147.0, 39152.0, 39158.0, 39163.0, 39170.0, 39174.0, 39180.0, 39189.0, 39199.0, 39210.0, 39218.0, 39229.0, 39240.0, 39246.0, 39254.0, 39265.0, 39272.0, 39283.0, 39293.0, 39302.0, 39313.0, 39324.0, 39335.0, 39342.0, 39353.0, 39360.0, 39371.0, 39377.0, 39387.0, 39395.0, 39405.0, 39416.0, 39425.0, 39436.0, 39446.0, 39457.0, 39468.0, 39480.0, 39490.0, 39501.0, 39517.0, 39527.0, 39537.0, 39547.0, 39557.0, 39566.0, 39577.0, 39587.0, 39593.0, 39600.0, 39609.0, 39615.0, 39621.0, 39628.0, 39637.0, 39643.0, 39649.0, 39660.0, 39675.0, 39684.0, 39691.0, 39701.0, 39712.0, 39719.0, 39729.0, 39740.0, 39749.0, 39760.0, 39770.0, 39782.0, 39792.0, 39797.0, 39807.0, 39816.0, 39824.0, 39827.0, 39838.0, 39849.0, 39865.0, 39874.0, 39884.0, 39894.0, 39899.0, 39910.0, 39921.0, 39937.0, 39947.0, 39954.0, 39965.0, 39977.0, 39983.0, 39994.0, 40005.0, 40013.0, 40024.0, 40029.0, 40036.0, 40040.0, 40046.0, 40057.0, 40068.0, 40081.0, 40092.0, 40101.0, 40112.0, 40123.0, 40129.0, 40140.0, 40150.0, 40156.0, 40165.0, 40176.0, 40186.0, 40196.0, 40207.0, 40218.0, 40229.0, 40234.0, 40243.0, 40253.0, 40260.0, 40269.0, 40279.0, 40286.0, 40296.0, 40304.0, 40315.0, 40326.0, 40337.0, 40352.0, 40359.0, 40370.0, 40377.0, 40385.0, 40396.0, 40403.0, 40413.0, 40423.0, 40431.0, 40434.0, 40445.0, 40456.0, 40473.0, 40483.0, 40494.0, 40505.0, 40511.0, 40522.0, 40537.0, 40549.0, 40560.0, 40566.0, 40576.0, 40585.0, 40591.0, 40596.0, 40602.0, 40613.0, 40618.0, 40628.0, 40639.0, 40646.0, 40656.0, 40665.0, 40685.0, 40694.0, 40705.0, 40715.0, 40723.0, 40733.0, 40741.0, 40751.0, 40764.0, 40768.0, 40779.0, 40790.0, 40796.0, 40807.0, 40817.0, 40825.0, 40835.0, 40845.0, 40856.0, 40867.0, 40874.0, 40882.0, 40885.0, 40896.0, 40907.0, 40912.0, 40923.0, 40934.0, 40945.0, 40952.0, 40964.0, 40968.0, 40978.0, 40989.0, 41000.0, 41011.0, 41016.0, 41026.0, 41033.0, 41043.0, 41054.0, 41064.0, 41074.0, 41084.0, 41095.0, 41111.0, 41120.0, 41128.0, 41139.0, 41150.0, 41162.0, 41172.0, 41177.0, 41187.0, 41188.0, 41199.0, 41210.0, 41221.0, 41226.0, 41232.0, 41238.0, 41245.0, 41249.0, 41255.0, 41260.0, 41266.0, 41273.0, 41277.0, 41282.0, 41288.0, 41298.0, 41308.0, 41317.0, 41327.0, 41338.0, 41348.0, 41357.0, 41367.0, 41378.0, 41387.0, 41398.0, 41409.0, 41415.0, 41425.0, 41436.0, 41446.0, 41457.0, 41462.0, 41465.0, 41471.0, 41476.0, 41485.0, 41498.0, 41514.0, 41521.0, 41531.0, 41541.0, 41552.0, 41558.0, 41566.0, 41577.0, 41586.0, 41592.0, 41597.0, 41603.0, 41614.0, 41621.0, 41627.0, 41632.0, 41638.0, 41645.0, 41658.0, 41667.0, 41683.0, 41693.0, 41702.0, 41710.0, 41713.0, 41724.0, 41730.0, 41739.0, 41751.0, 41761.0, 41769.0, 41780.0, 41791.0, 41802.0, 41807.0, 41813.0, 41818.0, 41830.0, 41837.0, 41841.0, 41847.0, 41852.0, 41858.0, 41867.0, 41869.0, 41880.0, 41885.0, 41896.0, 41905.0, 41916.0, 41927.0, 41938.0, 41944.0, 41949.0, 41956.0, 41960.0, 41966.0, 41971.0, 41977.0, 41986.0, 41988.0, 41999.0, 42004.0, 42011.0, 42022.0, 42029.0, 42039.0, 42052.0, 42062.0, 42070.0, 42081.0, 42086.0, 42093.0, 42097.0, 42103.0, 42114.0, 42120.0, 42130.0, 42141.0, 42148.0, 42151.0, 42162.0, 42173.0, 42189.0, 42199.0, 42205.0, 42215.0, 42226.0, 42235.0, 42246.0, 42256.0, 42267.0, 42272.0, 42279.0, 42283.0, 42289.0, 42294.0, 42305.0, 42316.0, 42327.0, 42344.0, 42354.0, 42359.0, 42367.0, 42377.0, 42388.0, 42399.0, 42405.0, 42416.0, 42427.0, 42436.0, 42446.0, 42453.0, 42464.0, 42475.0, 42484.0, 42495.0, 42506.0, 42517.0, 42528.0, 42541.0, 42552.0, 42562.0, 42569.0, 42579.0, 42589.0, 42597.0, 42600.0, 42611.0, 42622.0, 42639.0, 42649.0, 42655.0, 42661.0, 42668.0, 42672.0, 42678.0, 42683.0, 42689.0, 42696.0, 42700.0, 42705.0, 42711.0, 42721.0, 42733.0, 42743.0, 42749.0, 42760.0, 42771.0, 42776.0, 42787.0, 42794.0, 42804.0, 42815.0, 42825.0, 42831.0, 42841.0, 42847.0, 42854.0, 42858.0, 42869.0, 42885.0, 42892.0, 42902.0, 42913.0, 42930.0, 42940.0, 42951.0, 42962.0, 42970.0, 42981.0, 42987.0, 42997.0, 43005.0, 43015.0, 43026.0, 43036.0, 43046.0, 43056.0, 43067.0, 43081.0, 43089.0, 43100.0, 43111.0, 43116.0, 43122.0, 43129.0, 43149.0, 43158.0, 43169.0, 43179.0, 43189.0, 43195.0, 43202.0, 43206.0, 43211.0, 43222.0, 43229.0, 43239.0, 43249.0, 43259.0, 43265.0, 43272.0, 43276.0, 43282.0, 43288.0, 43298.0, 43306.0, 43317.0, 43329.0, 43335.0, 43346.0, 43355.0, 43371.0, 43382.0, 43393.0, 43404.0, 43415.0, 43427.0, 43432.0, 43439.0, 43449.0, 43457.0, 43468.0, 43479.0, 43485.0, 43495.0, 43505.0, 43513.0, 43516.0, 43528.0, 43538.0, 43549.0, 43560.0, 43571.0, 43576.0, 43582.0, 43590.0, 43600.0, 43601.0, 43612.0, 43622.0, 43632.0, 43640.0, 43651.0, 43658.0, 43669.0, 43680.0, 43686.0, 43697.0, 43703.0, 43713.0, 43724.0, 43731.0, 43734.0, 43745.0, 43756.0, 43770.0, 43779.0, 43789.0, 43800.0, 43811.0, 43817.0, 43825.0, 43836.0, 43845.0, 43856.0, 43871.0, 43878.0, 43888.0, 43900.0, 43911.0, 43917.0, 43923.0, 43934.0, 43941.0, 43951.0, 43963.0, 43974.0, 43987.0, 43996.0, 44012.0, 44023.0, 44031.0, 44039.0, 44042.0, 44053.0, 44059.0, 44068.0, 44079.0, 44090.0, 44095.0, 44104.0, 44116.0, 44126.0, 44131.0, 44142.0, 44153.0, 44164.0, 44172.0, 44183.0, 44194.0, 44205.0, 44218.0, 44230.0, 44239.0, 44250.0, 44261.0, 44266.0, 44276.0, 44287.0, 44298.0, 44306.0, 44318.0, 44328.0, 44339.0, 44350.0, 44355.0, 44364.0, 44373.0, 44384.0, 44392.0, 44402.0]
PWM:  [100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 100.0, 90.0, 90.0, 90.0, 90.0, 90.0, 90.0, 90.0, 90.0, 90.0, 90.0, 90.0, 73.0, 73.0, 73.0, 73.0, 73.0, 73.0, 73.0, 73.0, 73.0, 73.0, 73.0, 57.0, 57.0, 57.0, 57.0, 57.0, 57.0, 57.0, 57.0, 57.0, 57.0, 57.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 45.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0, 67.0] -->
							<p>After testing on bare floor (and a partially charged battery), I found that a Kp of 0.03 was suitable for this experiment. When I tested my robot on a carpet, the Kp had to be increased to around 0.08 due to the increased friction.</p>
							<h3>Speed!</h3>
							<p>After I was certain that my P control was working properly, I increased the maximum PWM to be around 220 to allow the robot to go as fast as possible when necessary; going above this threshold of 220 resulted in unexepcted behavior at times with my robot such as the wheels turning backwards. Below is the video and figure showing the max speed, which achieves steady state in around 4 seconds.</p>
							<video controls>
								<source src="videos/lab5_video3.mov" type="video/mp4">
							</video> 
							<figure>
								<img src="images/lab5_max_speed_4s_distance.png" height="300">
								<img src="images/lab5_max_speed_4s_pwm.png" height="300">
								<figcaption>Figure 7.</figcaption>
							</figure>
							<h3>Potential Improvements</h3>
							<p>Due to the intricacies described above along with certain bugs in my setup, getting my P controller to work took my quite a bit of time. If I were given more time, I would definitely add an I-term into this controller, as it would allow the system to decrease steady-state error therefore improving stability. I could also explore setting a timing budget and lowering the integration time, both of which have tradeoffs with accuracy and speed and would require further analysis. </p>

							<h2>Extrapolation</h2>
							<h3>Frequency of ToF Sensor</h3>
							<p>The frequency of the ToF sensor is around 22Hz, which was calculated as shown below. Here, the code to store data into the arrays was placed inside the if statement which checks for the ToF data.</p>
							<figure>
								<img src="images/lab5_sensor_freq.png">
								<figcaption>Figure 8.</figcaption>
							</figure>
							<h3>PID Control Loop Speed</h3>
							<p>The loop frequency is around 101Hz, which was calculated using the metric below. Here, the code to store data into the arrays was placed outside of the if statement which checks for the ToF data.</p>
							<figure>
								<img src="images/lab5_loop_freq.png">
								<figcaption>Figure 9.</figcaption>
							</figure>
							<h3>Extrapolation Implementation and Demo</h3>
							<p>From finding the frequency at which the sensor collects data and that the loop executes, we can see that  the ToF sensor collects data at a much slower rate than the PID loop. In this case, extrapolation can be used to predict future measurements using past data, which can reduce the number of oscillations that my robot does.</p>
							<p>In order to implmenent a simple linear extrapolation algorithm, I collected two data points for the time and the distance before the current time and distance. We can use these two points to calculate a future distance, which is predicted using a linear relationship by using the point-slope formula: y = m(x - x₁) + y₁. Here m = slope = (y2 - y1) / (x2 - x1). In terms of code, the figure below shows the additions to our PID command.</p>
							<figure>
								<img src="images/lab5_extrapolation_code_additions.png" height="300">
								<figcaption>Figure 10.</figcaption>
							</figure>
							<p>Below is a demo of extrapolation working on my robot, along with the necessary graphs. We see that adding extrapolation introduced a lower amount of oscillations along with smoother distance changes, although the PWM values vary quite a bit. Note that I increased the Kp value to be 0.07 as the ground now has a carpet.</p>
							<video controls>
								<source src="videos/lab5_extrapolation.mov" type="video/mp4">
							</video> 
							<figure>
								<img src="images/lab5_extrapolation_distance.png" height="300">
								<img src="images/lab5_extrapolation_pwm.png" height="300">
								<figcaption>Figure 11.</figcaption>
							</figure>
							<h2>References</h2>
							<p><ol>
								<li>I refered to Nila Narayan's webpage to help debug some of my code.</li>
								<li>Code snippet creation: <a href="https://carbon.now.sh" target="_blank">Carbon</a></li>
							</ol></p>
						</div>
					</section>

				
			</div>

		<!-- Footer -->
			<!-- <footer id="footer" class="wrapper style1-alt">
				<div class="inner">
					<ul class="menu">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer> -->

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>